(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{110:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(45),i=n.n(a),o=(n(110),n(11)),u=n(21),s=n(92),l=n.n(s),j=n(93),b=n.n(j),d=n(2);function f(e){var t=e.children;return Object(d.jsx)("div",{className:b.a.container,children:t})}var O=n(190),h=n(94),p=n.n(h),g=n(98),x=n.n(g),v=function(e){return e.auth.isLoggedIn},m=function(e){return e.auth.user.name},k=function(e){return e.auth.isFetchingCurrentUser},y=n(29);function w(){var e=Object(u.c)(m),t=Object(u.b)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.a,{sx:{ml:3,fontSize:30}}),Object(d.jsxs)(O.a,{sx:{ml:2},component:"div",variant:"h6",children:["Welcome, ",e]}),Object(d.jsx)(x.a,{sx:{ml:2,fontSize:30},onClick:function(){return t(y.a.logOut())}})]})}var L=n(191),C=n(186);function U(){return Object(d.jsxs)(C.a,{children:[Object(d.jsx)(L.a,{href:"/login",exact:!0,color:"inherit",variant:"outlined",children:"Log In"}),Object(d.jsx)(L.a,{href:"/register",exact:!0,color:"inherit",variant:"outlined",sx:{ml:3},children:"Register"})]})}var I=n(192),z=n(187),F=n(193);function S(){var e=Object(u.c)(v);return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(z.a,{children:Object(d.jsx)(I.a,{position:"fixed",sx:{bgcolor:"success.light"},children:Object(d.jsxs)(F.a,{children:[Object(d.jsx)(L.a,{href:"/",color:"inherit",variant:"h6",sx:{mr:"auto"},children:"Phonebook"}),e?Object(d.jsx)(w,{}):Object(d.jsx)(U,{})]})})})})}var T=n(10),R=n(55),P=["children","redirectTo"];function A(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(R.a)(e,P),a=Object(u.c)(v);return Object(d.jsx)(o.b,Object(T.a)(Object(T.a)({},c),{},{children:a?t:Object(d.jsx)(o.a,{to:r})}))}var B=["children","restricted","redirectTo"];function _(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/contacts":c,i=Object(R.a)(e,B),s=Object(u.c)(v)&&r;return Object(d.jsx)(o.b,Object(T.a)(Object(T.a)({},i),{},{children:s?Object(d.jsx)(o.a,{to:a}):t}))}var E=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,243))})),J=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,244))})),W=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,240))})),M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,242))}));function N(){var e=Object(u.b)(),t=Object(u.c)(k);return Object(r.useEffect)((function(){e(y.a.fetchCurrentUser())}),[e]),!t&&Object(d.jsxs)(f,{children:[Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(S,{})}),Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)(l.a,{style:{textAlign:"center",marginTop:"15px"},type:"Bars",color:"#1b5e20",height:80,width:80}),children:Object(d.jsxs)(o.d,{children:[Object(d.jsx)(_,{exact:!0,path:"/",restricted:!0,children:Object(d.jsx)(W,{})}),Object(d.jsx)(_,{path:"/register",restricted:!0,children:Object(d.jsx)(J,{})}),Object(d.jsx)(_,{path:"/login",restricted:!0,children:Object(d.jsx)(E,{})}),Object(d.jsx)(A,{path:"/contacts",children:Object(d.jsx)(M,{})})]})})]})}var V,q,D=n(13),G=n(69),H=n(100),K=n.n(H),Q=n(5),X=n(91),Y=Object(D.d)("",Object(Q.a)({},X.a,(function(e,t){return t.payload}))),Z=Object(D.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(V={},Object(Q.a)(V,y.a.register.fulfilled,(function(e,t){t.payload&&(e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0)})),Object(Q.a)(V,y.a.logIn.fulfilled,(function(e,t){t.payload&&(e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0)})),Object(Q.a)(V,y.a.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(Q.a)(V,y.a.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(Q.a)(V,y.a.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),Object(Q.a)(V,y.a.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),V)}).reducer,$=n(28),ee=n(32),te=Object(D.e)({name:"contacts",initialState:{entities:[],isLoading:!1,error:null},extraReducers:(q={},Object(Q.a)(q,ee.b.fulfilled,(function(e,t){return Object(T.a)(Object(T.a)({},e),{},{entities:t.payload,isLoading:!1})})),Object(Q.a)(q,ee.b.pending,(function(e){return Object(T.a)(Object(T.a)({},e),{},{isLoading:!0})})),Object(Q.a)(q,ee.b.rejected,(function(e){return Object(T.a)(Object(T.a)({},e),{},{isLoading:!1})})),Object(Q.a)(q,ee.a.fulfilled,(function(e,t){return Object(T.a)(Object(T.a)({},e),{},{entities:[].concat(Object($.a)(e.entities),[t.payload]),isLoading:!1})})),Object(Q.a)(q,ee.a.pending,(function(e){return Object(T.a)(Object(T.a)({},e),{},{isLoading:!0})})),Object(Q.a)(q,ee.a.rejected,(function(e){return Object(T.a)(Object(T.a)({},e),{},{isLoading:!1})})),Object(Q.a)(q,ee.c.fulfilled,(function(e,t){return Object(T.a)(Object(T.a)({},e),{},{entities:e.entities.filter((function(e){return e.id!==t.payload})),isLoading:!1})})),Object(Q.a)(q,ee.c.pending,(function(e){return Object(T.a)(Object(T.a)({},e),{},{isLoading:!0})})),Object(Q.a)(q,ee.c.rejected,(function(e){return Object(T.a)(Object(T.a)({},e),{},{isLoading:!1})})),q)}).reducer,ne={key:"auth",storage:K.a,whitelist:["token"]},re=Object(D.a)({reducer:{auth:Object(G.a)(ne,Z),filter:Y,contacts:te}}),ce=Object(G.b)(re),ae=n(41),ie=n(101);i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(u.a,{store:re,children:Object(d.jsx)(ie.a,{loading:null,persistor:ce,children:Object(d.jsx)(ae.a,{children:Object(d.jsx)(N,{})})})})}),document.getElementById("root"))},29:function(e,t,n){"use strict";var r=n(17),c=n.n(r),a=n(35),i=n(27),o=n.n(i),u=n(13);o.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var s=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){o.a.defaults.headers.common.Authorization=""},j=Object(u.c)("auth/register",function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/signup",t);case 3:return n=e.sent,r=n.data,s(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),b=Object(u.c)("auth/login",function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/login",t);case 3:return n=e.sent,r=n.data,s(r.token),e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),d={register:j,logOut:Object(u.c)("auth/logout",Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.post("/users/logout");case 3:l(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),logIn:b,fetchCurrentUser:Object(u.c)("auth/refresh",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,i,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return s(a),e.prev=5,e.next=8,o.a.get("/users/current");case 8:return i=e.sent,u=i.data,e.abrupt("return",u);case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())};t.a=d},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return j}));var r=n(17),c=n.n(r),a=n(35),i=n(27),o=n.n(i);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var u=n(13),s=Object(u.c)("contacts/fetchContacts",Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/contacts").then((function(e){return e.data}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),l=Object(u.c)("contacts/addContact",function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.number,e.next=3,c={name:n,number:r},o.a.post("/contacts",c).then((function(e){return e.data}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}()),j=Object(u.c)("contacts/removeContact",function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n=t,o.a.delete("/contacts/".concat(n));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}())},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(13),c=Object(r.b)("filter/filter")},93:function(e,t,n){e.exports={container:"Container_container__1zaTS"}}},[[156,2,3]]]);
//# sourceMappingURL=main.ca76ed70.chunk.js.map